{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport izitoast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst datePickerInput = document.querySelector('input[id=\"datetime-picker\"]');\nconst startBtn = document.querySelector('button[data-start]');\nconst days = document.querySelector('span[data-days]');\nconst hours = document.querySelector('span[data-hours]');\nconst minutes = document.querySelector('span[data-minutes]');\nconst seconds = document.querySelector('span[data-seconds]');\n\nlet userSelectedDate = null;\nstartBtn.disabled = true;\nlet timeDeadline = null;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (selectedDates[0] <= new Date()) {\n      izitoast.error({ position: 'topRight', message: 'Please choose a date in the future',});\n    } else {\n      startBtn.disabled = false;\n      timeDeadline = selectedDates[0];\n    }\n  },\n};\n\nflatpickr(datePickerInput, options);\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nstartBtn.addEventListener('click', onStart);\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction onStart() {\n  startBtn.disabled = true;\n  datePickerInput.disabled = true;\n  const startTime = Date.now();\n\n  userSelectedDate = setInterval(() => {\n    const currentTime = Date.now();\n    let diff = timeDeadline - currentTime;\n\n    if (diff >= 0) {\n      let time = convertMs(diff);\n\n      days.textContent = addLeadingZero(time.days);\n      hours.textContent = addLeadingZero(time.hours);\n      minutes.textContent = addLeadingZero(time.minutes);\n      seconds.textContent = addLeadingZero(time.seconds);\n    } else {\n      izitoast.show({\n        message: 'CountDown finished',\n        messageColor: '#f44566',\n        messageSize: '18px',\n        backgroundColor: '#ffffff',\n        position: 'topRight',\n        timeout: 1000, \n      });\n      clearInterval(userSelectedDate);\n    }\n  }, 1000);\n}\n"],"names":["datePickerInput","startBtn","days","hours","minutes","seconds","userSelectedDate","timeDeadline","options","selectedDates","izitoast","flatpickr","convertMs","ms","onStart","addLeadingZero","value","currentTime","diff","time"],"mappings":"0IASA,MAAMA,EAAkB,SAAS,cAAc,6BAA6B,EACtEC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAO,SAAS,cAAc,iBAAiB,EAC/CC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAU,SAAS,cAAc,oBAAoB,EAE3D,IAAIC,EAAmB,KACvBL,EAAS,SAAW,GACpB,IAAIM,EAAe,KAEnB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjBA,EAAc,IAAM,IAAI,KAC1BC,EAAS,MAAM,CAAE,SAAU,WAAY,QAAS,oCAAoC,CAAE,GAEtFT,EAAS,SAAW,GACpBM,EAAeE,EAAc,GAEhC,CACH,EAEAE,EAAUX,EAAiBQ,CAAO,EAElC,SAASI,EAAUC,EAAI,CAMrB,MAAMX,EAAO,KAAK,MAAMW,EAAK,KAAG,EAC1BV,EAAQ,KAAK,MAAOU,EAAK,MAAO,IAAI,EACpCT,EAAU,KAAK,MAAQS,EAAK,MAAO,KAAQ,GAAM,EACjDR,EAAU,KAAK,MAASQ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAX,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEAJ,EAAS,iBAAiB,QAASa,CAAO,EAE1C,SAASC,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASF,GAAU,CACjBb,EAAS,SAAW,GACpBD,EAAgB,SAAW,GAG3BM,EAAmB,YAAY,IAAM,CACnC,MAAMW,EAAc,KAAK,MACzB,IAAIC,EAAOX,EAAeU,EAE1B,GAAIC,GAAQ,EAAG,CACb,IAAIC,EAAOP,EAAUM,CAAI,EAEzBhB,EAAK,YAAca,EAAeI,EAAK,IAAI,EAC3ChB,EAAM,YAAcY,EAAeI,EAAK,KAAK,EAC7Cf,EAAQ,YAAcW,EAAeI,EAAK,OAAO,EACjDd,EAAQ,YAAcU,EAAeI,EAAK,OAAO,CACvD,MACMT,EAAS,KAAK,CACZ,QAAS,qBACT,aAAc,UACd,YAAa,OACb,gBAAiB,UACjB,SAAU,WACV,QAAS,GACjB,CAAO,EACD,cAAcJ,CAAgB,CAEjC,EAAE,GAAI,CACT"}